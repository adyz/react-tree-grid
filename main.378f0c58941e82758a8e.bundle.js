(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{405:function(module,exports,__webpack_require__){__webpack_require__(406),__webpack_require__(510),module.exports=__webpack_require__(511)},511:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(25),__webpack_require__(19),__webpack_require__(17),__webpack_require__(26),__webpack_require__(22);var _storybook_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(251),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(252);Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_6__.configureActions)();var req=__webpack_require__(675);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_5__.configure)(function loadStories(){req.keys().forEach(req)},module)}.call(this,__webpack_require__(288)(module))},675:function(module,exports,__webpack_require__){var map={"./my.stories.tsx":676};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=675},676:function(module,exports,__webpack_require__){"use strict";(function(module){var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var React=__webpack_require__(0),react_1=__webpack_require__(251),addon_info_1=__webpack_require__(677),addon_actions_1=__webpack_require__(252),VirtualTree_1=__webpack_require__(804),customData_1=__webpack_require__(894),VirtualTreeStories=react_1.storiesOf("VirtualTree",module).addDecorator(addon_info_1.withInfo),buttonStyle={border:0,fontSize:"14px",marginRight:"10px",height:"24px",width:"24px",lineHeight:"24px",background:"#E7D3AF",borderRadius:"50%",fontFamily:"PT Mono, monospace"};VirtualTreeStories.add("VirtualTree",function(){return React.createElement(VirtualTree_1.default,{nodes:customData_1.data,allExpanded:!1},function(_a){var style=_a.style,node=_a.node,expandOrCollapse=(_a.index,_a.selectNode,_a.expandOrCollapse);return React.createElement("div",{style:style},React.createElement("div",{style:{overflow:"auto",borderBottom:"1px solid #fff",fontFamily:"sans-serif",fontSize:"15px",color:"#775E32"}},React.createElement("p",{style:{padding:"10px 0",paddingLeft:20*node.nesting+"px",background:"#FFF1F1",margin:"0",display:"block",lineHeight:"24px"}},node.hasChildren?React.createElement("button",{style:buttonStyle,onClick:function(e){e.stopPropagation(),addon_actions_1.action("a")("Row clicked"),expandOrCollapse(node.path)}},node.expanded?"-":"+"):React.createElement("button",{style:__assign({},buttonStyle,{background:"#fff"})},"-"),React.createElement("label",{htmlFor:node.path},"Path: ",node.path," / i: ",node.i," / Name: ",node.name))))})})}).call(this,__webpack_require__(80)(module))},680:function(module,exports,__webpack_require__){var map={"./nestedObjectAssign":338,"./nestedObjectAssign.js":338};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=680},804:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var React=__webpack_require__(0),flatten_1=__webpack_require__(805),react_virtualized_1=__webpack_require__(895),cache=new react_virtualized_1.CellMeasurerCache({defaultHeight:40,fixedWidth:!0});function startsWith(haystack,needle){return 0===haystack.lastIndexOf(needle,0)}var VirtualTree=function(_super){function VirtualTree(props){var _this=_super.call(this,props)||this;return _this.objectKeys=[],_this.memo={},_this.state={visibleKeys:[],newNodes:{}},_this.expandOrCollapse=_this.expandOrCollapse.bind(_this),_this.onSelectNode=_this.onSelectNode.bind(_this),_this._rowRenderer=_this._rowRenderer.bind(_this),_this}return __extends(VirtualTree,_super),VirtualTree.prototype.componentDidMount=function(){var flatNodes=flatten_1.default(this.props.nodes,this.props.allExpanded),visibleKeys=this.getVisibleNodeKeys(flatNodes);this.setState({visibleKeys:visibleKeys,newNodes:flatNodes})},VirtualTree.prototype.getVisibleNodeKeys=function(nodes,keyToStartFrom){var visibleNodes=[],myCollapsedNodes={};function pushTheNodes(expanded,path){var myPath=path.split("-")[1],found=!1;if(myCollapsedNodes[myPath]&&myCollapsedNodes[myPath].length>0)for(var i=0;i<myCollapsedNodes[myPath].length;i++)if(startsWith(path,myCollapsedNodes[myPath][i])){found=!0;break}found||(expanded?visibleNodes.push(path):myCollapsedNodes[myPath]&&myCollapsedNodes[myPath].length>0?myCollapsedNodes[myPath].push(path):myCollapsedNodes[myPath]=[path])}for(var objectKeys=Object.keys(nodes),foundAtLeaseAChildren=!1,keyI=0;keyI<objectKeys.length;keyI++){var _a=nodes[objectKeys[keyI]],expanded=_a.expanded,path=_a.path;if(void 0!==keyToStartFrom){if(path!==keyToStartFrom&&startsWith(path,keyToStartFrom))pushTheNodes(expanded,path),foundAtLeaseAChildren=!0;else if(foundAtLeaseAChildren){console.log("Will break here",keyI);break}}else pushTheNodes(expanded,path)}for(var key in myCollapsedNodes)visibleNodes.push.apply(visibleNodes,myCollapsedNodes[key]);return visibleNodes.sort(),visibleNodes},VirtualTree.prototype.expandOrCollapse=function(key){var _this=this;this.setState(function(prevState){var newNodes=__assign({},prevState).newNodes,newExpanded=!newNodes[key].expanded;if(newNodes[key].expanded=newExpanded,newExpanded){var mergedVisibleKeys=_this.getVisibleNodeKeys(newNodes,key).concat(prevState.visibleKeys);return mergedVisibleKeys.sort(),{visibleKeys:mergedVisibleKeys,newNodes:newNodes}}return console.log("I should show hide the kids to this: ",key),{visibleKeys:prevState.visibleKeys.filter(function(visibleKey){return!visibleKey.startsWith(key)||visibleKey===key}),newNodes:newNodes}})},VirtualTree.prototype.onSelectNode=function(key,newCheckState){var _this=this;console.log("onSelect",key,newCheckState),this.setState(function(prevState){var newNodes=__assign({},prevState).newNodes;if(newNodes[key].checkedState=newCheckState,newNodes[key].hasChildren)for(var newNodeKey in newNodes)startsWith(newNodeKey,key)&&(newNodes[newNodeKey].checkedState=newCheckState);return __assign({},prevState,{newNodes:newNodes})},function(){return _this.list.forceUpdateGrid()})},VirtualTree.prototype._noRowsRenderer=function(){return React.createElement("p",null,"No rows")},VirtualTree.prototype._rowRenderer=function(_a){var index=_a.index,key=_a.key,parent=_a.parent,style=_a.style,isScrolling=_a.isScrolling,isVisible=_a.isVisible;return React.createElement(react_virtualized_1.CellMeasurer,{cache:cache,columnIndex:0,key:key,parent:parent,rowIndex:index},this.props.children({isScrolling:isScrolling,isVisible:isVisible,key:key,style:style,index:index,parent:parent,node:this.state.newNodes[this.state.visibleKeys[index]],expandOrCollapse:this.expandOrCollapse,selectNode:this.onSelectNode}))},VirtualTree.prototype.render=function(){var _this=this;return console.log("Render length",this.state.visibleKeys.length),this.state.visibleKeys.length>0&&React.createElement(react_virtualized_1.List,{ref:function(ref){_this.list=ref},height:540,overscanRowCount:5,noRowsRenderer:this._noRowsRenderer,rowCount:this.state.visibleKeys.length,deferredMeasurementCache:cache,rowHeight:cache.rowHeight,rowRenderer:this._rowRenderer,width:800})},VirtualTree}(React.Component);exports.default=VirtualTree;try{VirtualTree.displayName="VirtualTree",VirtualTree.__docgenInfo={description:"",displayName:"VirtualTree",props:{nodes:{defaultValue:null,description:"",name:"nodes",required:!0,type:{name:"T[]"}},allExpanded:{defaultValue:null,description:"",name:"allExpanded",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/VirtualTree/VirtualTree.tsx#VirtualTree"]={docgenInfo:VirtualTree.__docgenInfo,name:"VirtualTree",path:"src/components/VirtualTree/VirtualTree.tsx#VirtualTree"})}catch(__react_docgen_typescript_loader_error){}},805:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var characterLimitWarnShown=!1,CHARS_LIMIT=65536,CHAR_START=97;exports.default=function flattenObject(nodes,allExpanded){var toReturn={};return function rec(restNodes,prevIndex,nesting){void 0===nesting&&(nesting=0),restNodes.forEach(function(node,i){var myKey=prevIndex+"-"+function idOf(i){return i>CHARS_LIMIT&&!1===characterLimitWarnShown&&(console.warn("You have to many root nodes for a browser to possibly compute, the order of nodes might not be good"),characterLimitWarnShown=!0),String.fromCharCode(i+CHAR_START)}(i),newNesting=nesting+1;node.children&&node.children.length>0?(toReturn[myKey]=__assign({},node,{nesting:newNesting,path:myKey,hasChildren:!0,parent:prevIndex,children:[],checkedState:0,i:i,expanded:void 0!==allExpanded?allExpanded:void 0===node.expanded||node.expanded}),rec(node.children,myKey,newNesting)):toReturn[myKey]=__assign({},node,{nesting:newNesting,path:myKey,hasChildren:!1,parent:prevIndex,children:[],checkedState:0,i:i,expanded:!0})})}(nodes,"a"),toReturn}},894:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.data=[{id:"0-0",name:"test 0-0",expanded:!0,children:[{id:"0-0-0",name:"test 0-0-0",expanded:!0,children:[]},{id:"0-0-1",name:"test 0-0-1",expanded:!0,children:[]},{id:"0-0-2",name:"test 0-0-2",expanded:!1,children:[{id:"0-0-2-0",name:"test 0-0-2-0",expanded:!0,children:[]},{id:"0-0-2-1",name:"test 0-0-2-1",expanded:!0,children:[]},{id:"0-0-2-2",name:"test 0-0-2-2",expanded:!1,children:[{id:"0-0-2-2-0",name:"test 0-0-2-2-0",expanded:!0,children:[]},{id:"0-0-2-2-1",name:"test 0-0-2-2-1",expanded:!0,children:[]},{id:"0-0-2-2-2",name:"test 0-0-2-2-2",expanded:!0,children:[{id:"0-0-2-2-2-0",name:"test 0-0-2-2-2-0",expanded:!0,children:[]},{id:"0-0-2-2-2-1",name:"test 0-0-2-2-2-1",expanded:!0,children:[]},{id:"0-0-2-2-2-2",name:"test 0-0-2-2-2-2",expanded:!0,children:[]}]}]}]}]},{id:"0-1",name:"test 0-1",expanded:!1,children:[{id:"0-1-0",name:"test 0-1-0",expanded:!1,children:[]},{id:"0-1-1",name:"test 0-1-1",expanded:!0,children:[]},{id:"0-1-2",name:"test 0-1-2",expanded:!1,children:[{id:"0-1-2-0",name:"test 0-1-2-0",expanded:!0,children:[]},{id:"0-1-2-1",name:"test 0-1-2-1",expanded:!0,children:[]},{id:"0-1-2-2",name:"test 0-1-2-2",expanded:!1,children:[{id:"0-1-2-2-0",name:"test 0-1-2-2-0",expanded:!0,children:[]},{id:"0-1-2-2-1",name:"test 0-1-2-2-1",expanded:!0,children:[]},{id:"0-1-2-2-2",name:"test 0-1-2-2-2",expanded:!1,children:[{id:"0-1-2-2-2-0",name:"test 0-1-2-2-2-0",expanded:!0,children:[]},{id:"0-1-2-2-1",name:"test 0-1-2-0-2-1",expanded:!0,children:[]},{id:"0-1-2-2-2",name:"test 0-1-2-2-2-2",expanded:!0,children:[]}]}]}]}]},{id:"0-2",name:"test 0-2",expanded:!1,children:[{id:"0-2-0",name:"test 0-2-0",expanded:!0,children:[]},{id:"0-2-1",name:"test 0-2-1",expanded:!0,children:[]},{id:"0-2-2",name:"test 0-2-2",expanded:!1,children:[{id:"0-2-2-0",name:"test 0-2-2-0",expanded:!0,children:[]},{id:"0-2-2-1",name:"test 0-2-2-1",expanded:!0,children:[]},{id:"0-2-2-2",name:"test 0-2-2-2",expanded:!1,children:[{id:"0-2-2-2-0",name:"test 0-2-2-2-0",expanded:!0,children:[]},{id:"0-2-2-2-1",name:"test 0-2-2-2-1",expanded:!0,children:[]},{id:"0-2-2-2-2",name:"test 0-2-2-2-2",expanded:!1,children:[{id:"0-2-2-2-2-0",name:"test 0-2-2-2-2-0",expanded:!0,children:[]},{id:"0-2-2-2-1",name:"test 0-2-2-0-2-1",expanded:!0,children:[]},{id:"0-2-2-2-2",name:"test 0-2-2-2-2-2",expanded:!0,children:[]}]}]}]}]},{id:"0-3",name:"test 0-3",expanded:!1,children:[]},{id:"0-4",name:"test 0-4",expanded:!1,children:[]},{id:"0-5",name:"test 0-5",expanded:!1,children:[]},{id:"0-6",name:"test 0-6",expanded:!1,children:[]},{id:"0-7",name:"test 0-7",expanded:!1,children:[]},{id:"0-8",name:"test 0-8",expanded:!1,children:[]},{id:"0-9",name:"test 0-9",expanded:!1,children:[]},{id:"0-10",name:"test 0-10",expanded:!1,children:[{id:"0-10-0",name:"test 0-10-0",expanded:!1,children:[]},{id:"0-10-1",name:"test 0-10-1",expanded:!1,children:[{id:"0-10-1-0",name:"test 0-10-1-0",expanded:!1,children:[]}]},{id:"0-10-1",name:"test 0-10-1",expanded:!1,children:[]}]},{id:"0-11",name:"test 0-11",expanded:!1,children:[]}]}},[[405,1,2]]]);
//# sourceMappingURL=main.378f0c58941e82758a8e.bundle.js.map